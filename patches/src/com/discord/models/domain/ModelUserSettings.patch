--- smali_original/com/discord/models/domain/ModelUserSettings.smali
+++ smali/com/discord/models/domain/ModelUserSettings.smali
@@ -739,6 +739,26 @@ .method public assignField(Lcom/discord/
 
     move-result-object p1
 
+    # Aliucord: if deserialized "theme" property is not one of THEME_DARK | THEME_LIGHT | THEME_PURE_EVIL, then default to THEME_DARK
+    # Discord v126.21 cannot handle the "new" Desktop themes and causes a persistent activity restart loop
+    sget-object v0, Lcom/discord/models/domain/ModelUserSettings;->THEME_DARK:Ljava/lang/String;
+    invoke-virtual {v0, p1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+    move-result v1
+    if-nez v1, :cond_assign_theme
+
+    sget-object v1, Lcom/discord/models/domain/ModelUserSettings;->THEME_LIGHT:Ljava/lang/String;
+    invoke-virtual {v1, p1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+    move-result v1
+    if-nez v1, :cond_assign_theme
+
+    sget-object v1, Lcom/discord/models/domain/ModelUserSettings;->THEME_PURE_EVIL:Ljava/lang/String;
+    invoke-virtual {v1, p1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+    move-result v1
+    if-nez v1, :cond_assign_theme
+
+    move-object p1, v0
+
+    :cond_assign_theme
     iput-object p1, p0, Lcom/discord/models/domain/ModelUserSettings;->theme:Ljava/lang/String;
 
     goto/16 :goto_1f2
